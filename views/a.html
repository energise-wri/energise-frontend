<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">

    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="640">
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <script src="/lib/cookie-notice.js"></script>
    <script src="./browser.js"></script>

    <script src="./libs.js?v=--TIMESTAMP--"></script>
    <script src="./main.js?v=--TIMESTAMP--"></script>

    <link href="/stylesheets/style.css" rel="stylesheet" />
    <link href="/stylesheets/nav.css" rel="stylesheet" />

    <link href="/tool/lib/mapbox-gl.css" rel="stylesheet" />
    <link href="./main.css" rel="stylesheet" />

    <title>Energy Access Explorer</title>
  </head>

  <body>
    {{> views/nav}}

    <div id="mobile-switcher"></div>

    <div id="playground">
      <div id="controls-wrapper">
        <div class="controls-select-container"></div>

        <div id="controls">
          <div id="controls-tabs"></div>
          <div id="controls-contents"></div>
        </div>
      </div>

      <div id="visual">
        <div id="maparea">
          <div id="mapbox-container"></div>
          <div id="views"></div>
        </div>
        <div id="timeline"></div>
      </div>

      <div id="right-pane">
        <div id="cards-pane">
          <div id="cards-list"></div>
        </div>

        <div id="filtered-pane">
          <div class="up-title">Considered geographies</div>
          <ul id="filtered-subgeographies"></ul>
        </div>

        <div id="indexes-pane">
          <div id="index-graphs">
            <div id="index-graphs-title" class="up-title"></div>
            <div id="index-graphs-toolbox">
              <a id="index-graphs-info" title="Info about different indexes"></a>
              <a id="index-graphs-download" title="Download TIFF image of the current analysis"></a>
              <a id="index-graphs-code" title="Download JSON file of the current analysis"></a>
            </div>
            <div id="index-graphs-description"></div>
          </div>

          <ul id="indexes-list"></ul>

          <div id="summary-button" class="up-title" onclick="ea_summary_wrapper();" ripple>Snapshot</div>
        </div>

        <div id="drawer">
          <div onclick="ea_nanny_force_start();">
            Help
          </div>

          <div>
            Disclaimer
            <div id="disclaimer-message">
              <p>
                The maps are for illustrative purposes and do not imply the
                expression of any opinion on the part of WRI, concerning the
                legal status of any country or territory or concerning the
                delimitation of frontiers or boundaries.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

	{{> views/loading}}
  </body>

  <script type="module">
	import * as overlord from './overlord.js?v=--TIMESTAMP--';
	import * as parse from './dsparse.js?v=--TIMESTAMP--';
	import * as indexes from './indexes.js?v=--TIMESTAMP--';
	import './ds.js';

    window.ea_modal = new modal("ea-modal", {});
    window.ea_flash = new flash();
    window.ea_api = new pgrest(ea_settings.database, ea_flash);

	window.GEOGRAPHY = null;
	window.MAPBOX = null;
	window.INFOMODE = false;
	window.MOBILE = false;
	window.BOUNDARIES = {};
	window.O = null;
	window.U = null;
	window.DST = new Map();

	// These should not exist. WIP.
	window.ea_datasets_csv = parse.csv;
	window.ea_datasets_points = parse.points;
	window.ea_datasets_lines = parse.lines;
	window.ea_datasets_polygons = parse.polygons;
	window.ea_datasets_tiff = parse.tiff;
	window.ea_datasets_parse_fail = parse.parse_fail;
	window.ea_indexes_graphs = indexes.graphs;

	overlord.init();
  </script>

  {{> views/templates}}

  {{> views/svgs}}

  {{> views/gapps}}
</html>
